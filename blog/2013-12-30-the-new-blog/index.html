<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.78 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:300;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2.2974rem;line-height:2.67rem;letter-spacing:-2px;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;color:inherit;font-family:'Open Sans',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}ul{margin-left:1.78rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.78rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;font-size:0.85rem;line-height:1.78rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;font-size:1rem;line-height:1.78rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}blockquote{margin-left:0;margin-right:1.78rem;margin-top:0;padding-bottom:0;padding-left:1.44625rem;padding-right:0;padding-top:0;margin-bottom:1.78rem;font-size:1.1487rem;line-height:1.78rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.33375rem solid hsla(0,0%,0%,0.2);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.78rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.78rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.78rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.78rem;margin-bottom:calc(1.78rem / 2);margin-top:calc(1.78rem / 2);}li > ul{margin-left:1.78rem;margin-bottom:calc(1.78rem / 2);margin-top:calc(1.78rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.78rem / 2);}code{font-size:0.85rem;line-height:1.78rem;}kbd{font-size:0.85rem;line-height:1.78rem;}samp{font-size:0.85rem;line-height:1.78rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.18667rem;padding-right:1.18667rem;padding-top:0.89rem;padding-bottom:calc(0.89rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#4b0082;text-decoration:none;}a:hover,a:active{text-decoration:underline;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.78rem;color:hsla(0,0%,0%,0.9);font-weight:300;}blockquote cite:before{content:"â€” ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.78rem;}blockquote{margin-left:-1.335rem;margin-right:0;padding-left:1.00125rem;}}@media only screen and (max-width:768px){h1{font-size:2rem;line-height:2.67rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.56rem;}</style><meta name="generator" content="Gatsby 5.14.1"/><meta name="description" content="Personal site of Andy Weiss" data-gatsby-head="true"/><meta name="image" content="https://rokob.github.io/favicon-32x32.png" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="rokob :: The New Blog" data-gatsby-head="true"/><meta name="twitter:url" content="https://rokob.github.io/blog/2013-12-30-the-new-blog/" data-gatsby-head="true"/><meta name="twitter:description" content="Personal site of Andy Weiss" data-gatsby-head="true"/><meta name="twitter:image" content="https://rokob.github.io/favicon-32x32.png" data-gatsby-head="true"/><meta name="twitter:creator" content="@dragonb3ar" data-gatsby-head="true"/><style data-href="/styles.f21535414e15f8faeffd.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.gatsby-highlight-code-line{background-color:#feb;border-left:.25em solid #f99;display:block;margin-left:-1em;margin-right:-1em;padding-left:.75em;padding-right:1em}.gatsby-highlight{background-color:#272822;border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}.gatsby-highlight pre[class*=language-]{background-color:transparent;float:left;margin:0;min-width:100%;overflow:initial;padding:0}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.8em}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link href="//fonts.googleapis.com/css?family=Open+Sans:700|Merriweather:300,300i,700,700i" rel="stylesheet" type="text/css"/><title data-gatsby-head="true">rokob :: The New Blog</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 1snke1a">.css-1snke1a{margin:0 auto;max-width:800px;padding-bottom:3.56rem;padding-top:2.67rem;}@media only screen and (max-width: 801px){.css-1snke1a{width:93%;}}</style><div class="css-1snke1a erleo414"><a href="/"><style data-emotion="css 1w8900m">.css-1w8900m{margin-top:0;margin-bottom:1.78rem;display:inline-block;font-style:normal;}</style><h3 class="css-1w8900m erleo412">rokob</h3></a><style data-emotion="css tjo4qw">.css-tjo4qw{float:right;}</style><div class="css-tjo4qw erleo411"><style data-emotion="css 13y4rum">.css-13y4rum{padding-left:0.89rem;}</style><a class="css-13y4rum erleo410" href="/reading/">Reading</a><a class="css-13y4rum erleo410" href="/about/">About</a></div><style data-emotion="css 198bgkg">.css-198bgkg{margin-top:3.56rem;}</style><div class="css-198bgkg erleo413"><style data-emotion="css dfkuil">.css-dfkuil{margin-bottom:0.89rem;}</style><h2 class="css-dfkuil e13a1ij53">The New Blog</h2><style data-emotion="css 1f6tha0">.css-1f6tha0{margin-top:0.89rem;margin-bottom:1.78rem;color:#bbb;}</style><h3 class="css-1f6tha0 e13a1ij52">30 Dec 2013</h3><style data-emotion="css k4kvhd">.css-k4kvhd{margin-top:3.56rem;margin-bottom:1.78rem;color:inherit;}</style><div class="css-k4kvhd e13a1ij51"><style data-emotion="css k8h3ik">.css-k8h3ik{margin-top:0.89rem;margin-bottom:0.445rem;}</style><h4 class="css-k8h3ik e13a1ij50">Category: <!-- -->update</h4><h4 class="css-k8h3ik e13a1ij50"><a href="/tags/">Tags:</a> <a href="/tags/blog/">blog</a>, <a href="/tags/jekyll/">jekyll</a></h4></div><style data-emotion="css 1aujq9w">.css-1aujq9w{text-align:justify;}</style><div class="css-1aujq9w e13a1ij54"><p>Two years ago I said that I was going to blog every single day as my New Year's
resolution. I managed 168 days and then nothing but silence. I am not really
sure why I just stopped so suddenly, one possibility being that I used to use
the commute home to do my writing, and my last entry was the day we moved out
of San Francisco which altered my commute considerably. Whatever the reason, I
have not written for the past 18 months or so and that is too bad. The reason I
wanted to write every day was so that I could look back and see how I was
feeling or what I was thinking about during certain periods of time without
having to try and remember. The last 18 months have been decently crazy and it
would have been really nice to see my thoughts during that time.</p>
<p>I also really wish I had access to those 168 posts but that is partially the
story for this new set-up. I got an email from Webfaction, my hosting provider,
telling me that the machine that my site was dying and thus they were going to
migrate me to a new server. They were telling me because this meant that the IP
address for my A record would need to be updated, but they said all of my data
would be moved over without me having to do anything. As it turns out, when I
finally got around to checking in on the new machine and changing my A record,
I noticed that all of my files were gone. The directory structure was all
there, but just no files. Weird. The code was backed up because I have it in a
private Bitbucket repo, but what was not backed up was the CouchDB files where
my blog posts were stored. So I sent an email to Webfaction asking about this
and seeing if they could restore my data from their backups. Here is their
response:</p>
<blockquote>
<p>I am sorry but we were not able to recover your files from our backup system.
Our system only keeps up to 10 days of backups and since it has been over 30
days there is no way to recover your files.</p>
<p>Regarding backups, we do make daily backups, but we do not guarantee their availability.
Sometimes problems with the backup servers can prevent backups from being made
successfully. Like all reputable web hosts, we do recommend to all our customers that
they make their own backups independent of ours for any mission-critical data that they
cannot afford to lose.</p>
</blockquote>
<p>Well that is just clowny. I understand it I guess, but still it is ridiculous
for a hosting provider to blow away all your files and then not be able to
recover them from their backups. Yes I should have backed up my DB but I never
got around to it so I have to pay the price for that.</p>
<p>I also tried to rely on the <a href="https://archive.org/web/">Wayback Machine</a> and Google caches to try
to restore my blog posts, but I only managed to get 3 out of the 168. I will be putting
those up here soon and back dating them, they are all stupid, but what the hell.
I actually wrote a tiny script to scrape the Wayback Machine which is how I got
the 3, but it did not have archives for anything else.</p>
<p>All this led me to the decision to get off
Webfaction and try something new. I also decided to try to incorporate the
backup of my posts in a natural way. This led me to <a href="http://pages.github.com/">Github Pages</a>
and <a href="http://jekyllrb.com">Jekyll</a>. I considered going to Hakyll route which I read about <a href="http://blaenkdenum.com/posts/the-switch-to-hakyll/">here</a>,
but in the end I decided to take some of the ideas from <a href="https://github.com/blaenk/blaenk.github.io/">blaenk's</a> set-up
and just mix it in with Jekyll. In particular, I have this blog set-up using
Github pages with two different branches, <code class="language-text">master</code> and <code class="language-text">source</code>. The <code class="language-text">source</code>
branch has all of the actual code and content that Jekyll needs to create
this site, whereas the <code class="language-text">master</code> branch just has the generated output. I use a
shell script to run Jekyll, perform a commit, and push the new content to
the right branch. This was copied directly from the aforementioned site.</p>
<p>One interesting thing that he did which I wanted to copy was to leverage
the fact that I am using <code class="language-text">git</code> to have an automatic way of tracking the
history of each post. On his site he used a single commit hash for
every single post when he was using Jekyll because it requires you to regeneate everything
every time. One nice think about Hakyll is that you only need to recompile
what has changed, so it is easy to get a git commit hash for each post
that only changes when the past actually changes. I wanted the best of both
worlds so I modified his commit plugin to the following:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">module</span> <span class="token class-name">Jekyll</span>
  <span class="token keyword">class</span> <span class="token class-name">Commit</span> <span class="token operator">&lt;</span> Liquid<span class="token double-colon punctuation">::</span>Tag
    <span class="token constant">MATCHER</span> <span class="token operator">=</span> <span class="token regex-literal"><span class="token regex">/\A(\S+)\Z/</span></span>
    <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">render</span></span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
      markup <span class="token operator">=</span> <span class="token variable">@markup</span><span class="token punctuation">.</span>strip
 
      page_file <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">context<span class="token punctuation">.</span>registers<span class="token punctuation">[</span><span class="token symbol">:site</span><span class="token punctuation">]</span><span class="token punctuation">.</span>source</span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span>
      file_path <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">context<span class="token punctuation">.</span>environments<span class="token punctuation">.</span>first<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"page"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"path"</span></span><span class="token punctuation">]</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span>
      page_file <span class="token operator">+=</span> <span class="token string-literal"><span class="token string">"/</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">file_path</span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span>
 
      sha <span class="token operator">=</span> <span class="token command-literal"><span class="token command string">`git log -n 1 --pretty=format:%H -- </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">page_file</span><span class="token delimiter punctuation">}</span></span><span class="token command string">`</span></span>
      message <span class="token operator">=</span> <span class="token command-literal"><span class="token command string">`git log -n 1 --pretty=format:%s -- </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">page_file</span><span class="token delimiter punctuation">}</span></span><span class="token command string">`</span></span>
 
      history_url <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"&lt;a href='https://github.com/rokob/rokob.github.com/commits/source/"</span></span>
      history_url <span class="token operator">+=</span> file_path
      history_url <span class="token operator">+=</span> <span class="token string-literal"><span class="token string">"'>History&lt;/a>"</span></span>
 
      commit_url <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"&lt;span class='commit' title=\"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">message</span><span class="token delimiter punctuation">}</span></span><span class="token string">\">"</span></span>
      <span class="token keyword">if</span> <span class="token keyword">not</span> markup<span class="token punctuation">.</span>empty<span class="token operator">?</span>
        repo <span class="token operator">=</span> markup<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token constant">MATCHER</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        commit_url <span class="token operator">+=</span> <span class="token string-literal"><span class="token string">"&lt;a href=\"https://github.com/</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">repo</span><span class="token delimiter punctuation">}</span></span><span class="token string">/commit/</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">sha</span><span class="token delimiter punctuation">}</span></span><span class="token string">\""</span></span>
        commit_url <span class="token operator">+=</span> <span class="token string-literal"><span class="token string">" title=\"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">message</span><span class="token delimiter punctuation">}</span></span><span class="token string">\"></span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">sha<span class="token punctuation">[</span><span class="token number">0.</span><span class="token punctuation">.</span><span class="token number">.8</span><span class="token punctuation">]</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">&lt;/a>"</span></span>
      <span class="token keyword">else</span>
        commit_url <span class="token operator">+=</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">sha<span class="token punctuation">[</span><span class="token number">0.</span><span class="token punctuation">.</span><span class="token number">.8</span><span class="token punctuation">]</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span>
      <span class="token keyword">end</span>
      commit_url <span class="token operator">+=</span> <span class="token string-literal"><span class="token string">"&lt;/span>"</span></span>
 
      history_url <span class="token operator">+</span> <span class="token string-literal"><span class="token string">" -- "</span></span> <span class="token operator">+</span> commit_url
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
 
Liquid<span class="token double-colon punctuation">::</span>Template<span class="token punctuation">.</span>register_tag<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'commit'</span></span><span class="token punctuation">,</span> Jekyll<span class="token double-colon punctuation">::</span>Commit<span class="token punctuation">)</span></code></pre></div>
<p>The trick here is that I used the fact that <code class="language-text">git log</code> can tell you the last
commit when a particular file changed, which is exactly what I want. I just
have to do some trickeration with the <code class="language-text">context</code> variable that is passed in
to get a file path for the current post, but after that it is pretty much
the same as his original plugin.</p>
<p>Jekyll is a pretty nice tool, I can't imagine I would outgrow it for quite some
time (where outgrow would mean generate too many pages to make the static site
unwieldy or desparately need server side logic).</p>
<p>I am going to try to post on here more frequently and not try to force myself
into writing everyday which will ultimately lead me to want to stop writing
if I miss too many times. I already have some ideas for a few posts that will
be meant to fill in the gaps of what I have been up to for the past 18 months,
and then probably some even more boring stuff.</p></div><div><a href="https://github.com/rokob/rokob.github.com/commits/source/content/2013-12-30-the-new-blog.md">History</a> -- <a href="https://github.com/rokob/rokob.github.com/commit/9a9b8cc9a846a5ab6c26cb187880f3092ad02345">9a9b8cc9</a></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2013-12-30-the-new-blog/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-74d18815dd077486fe4c.js\"],\"component---src-pages-about-js\":[\"/component---src-pages-about-js-12d390c00676b5f95045.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-71025402633be68d9d62.js\"],\"component---src-pages-reading-js\":[\"/component---src-pages-reading-js-cd120a53bb526792f88c.js\"],\"component---src-pages-tags-js\":[\"/component---src-pages-tags-js-551bcba74b82c97580b2.js\"],\"component---src-templates-blog-list-js\":[\"/component---src-templates-blog-list-js-4922d9da0b6024e3d157.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-24e2de5845dfd5db0fc0.js\"],\"component---src-templates-tag-js\":[\"/component---src-templates-tag-js-195017f3819c4f1a843c.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="28e259d4c394b6f54b8e";</script><script src="/webpack-runtime-6f516ec0fd1bbce05065.js" async></script><script src="/framework-b0d0d270dbf692bac4b7.js" async></script><script src="/app-74d18815dd077486fe4c.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>